
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tutorial avanzado para aprender a programar en lenguaje R">
      
      
      
        <meta name="author" content="José Carlos y Manuel Jesús">
      
      
      <link rel="shortcut icon" href="../icon/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.0">
    
    
      
        <title>Visualizar datos - Tutorial avanzado de programación en R</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a3f8f96a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7CConsolas&display=fallback">
        <style>:root{--md-text-font-family:"";--md-code-font-family:"Consolas"}</style>
      
    
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-VCVDM3VLCC","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#visualizacion-de-datos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Tutorial avanzado de programación en R" class="md-header__button md-logo" aria-label="Tutorial avanzado de programación en R">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4V2m14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4V2m-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42l1.83-1.19M7 3h10v1l-.06.5H7.06L7 4V3m.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06l.51-.44m-2.03 3h9.88l.06.5v1H7v-1l.06-.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tutorial avanzado de programación en R
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Visualizar datos
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Tutorial avanzado de programación en R" class="md-nav__button md-logo" aria-label="Tutorial avanzado de programación en R">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4V2m14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4V2m-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42l1.83-1.19M7 3h10v1l-.06.5H7.06L7 4V3m.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06l.51-.44m-2.03 3h9.88l.06.5v1H7v-1l.06-.5z"/></svg>

    </a>
    Tutorial avanzado de programación en R
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Inicio
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tidyverse/" class="md-nav__link">
        Tidyverse
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Visualizar datos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Visualizar datos
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#visualizacion-de-datos" class="md-nav__link">
    Visualización de datos
  </a>
  
    <nav class="md-nav" aria-label="Visualización de datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aesthetics" class="md-nav__link">
    Aesthetics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graficos-estadisticos" class="md-nav__link">
    Gráficos estadísticos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graficas-multiples" class="md-nav__link">
    Gráficas múltiples
  </a>
  
    <nav class="md-nav" aria-label="Gráficas múltiples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#graficas-por-capas" class="md-nav__link">
    Gráficas por capas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graficas-por-ventanas-facets" class="md-nav__link">
    Gráficas por ventanas (facets)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../importar/" class="md-nav__link">
        Importar datos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ordenar/" class="md-nav__link">
        Ordenar datos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../modelar/" class="md-nav__link">
        Modelar datos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../genesis/" class="md-nav__link">
        Bioconductor y GENESIS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ejercicios/" class="md-nav__link">
        Realización de ejercicios
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../acerca/" class="md-nav__link">
        Acerca de
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#visualizacion-de-datos" class="md-nav__link">
    Visualización de datos
  </a>
  
    <nav class="md-nav" aria-label="Visualización de datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aesthetics" class="md-nav__link">
    Aesthetics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graficos-estadisticos" class="md-nav__link">
    Gráficos estadísticos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graficas-multiples" class="md-nav__link">
    Gráficas múltiples
  </a>
  
    <nav class="md-nav" aria-label="Gráficas múltiples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#graficas-por-capas" class="md-nav__link">
    Gráficas por capas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graficas-por-ventanas-facets" class="md-nav__link">
    Gráficas por ventanas (facets)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicios" class="md-nav__link">
    Ejercicios
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Visualizar datos</h1>
                
                <h2 id="visualizacion-de-datos">Visualización de datos</h2>
<h3 id="introduccion">Introducción</h3>
<p>Es innegable que la ciencias de datos, sobre todo para los recién llegados, puede resultar un poco tediosa. Podemos deducir del <a href="http://127.0.0.1:8000/tidyverse/#el-flujo-de-trabajo-en-la-ciencia-de-datos">esquema del apartado anterior</a> que, a la hora de entrar en la ciencia de datos, lo mejor es empezar por el principio, es decir, importar, ordenar y transformar los datos.</p>
<p>Sin embargo, esta tarea puede ser muy aburrida y frustrante. Tidyverse, por tanto, propone comenzar el estudio de esta disciplina por la parte de <strong>visualización de datos</strong> que ya han sido ordenados y transformados, tarea mucho más amigable para los nuevos.</p>
<p>El paquete de Tidyverse encargado de la generación de gráficas es <strong><em>ggplot2</em></strong>. Abrimos RStudio y activamos la librería:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>En la consola veremos el siguiente mensaje:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──
#&gt; ✔ ggplot2 3.3.2     ✔ purrr   0.3.4
#&gt; ✔ tibble  3.0.3     ✔ dplyr   1.0.2
#&gt; ✔ tidyr   1.1.2     ✔ stringr 1.4.0
#&gt; ✔ readr   1.4.0     ✔ forcats 0.5.0
#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
#&gt; ✖ dplyr::filter() masks stats::filter()
#&gt; ✖ dplyr::lag()    masks stats::lag()
</code></pre></div>
</td></tr></table>

<p><em>ggplot2</em> está activo y listo para usarse. Activaremos Tidyverse cada vez que iniciemos una nueva sesión en RStudio. Podemos ver, además, como hay algunos paquetes en conflicto con otras funciones de R base, pero eso no importa demasiado por ahora.</p>
<p>Comencemos a graficar con <em>ggplot2</em>. Como todavía no sabemos importar nuestros propios datos a Tidyverse, vamos a usar una serie de conjuntos de datos incluidos de serie en este paquete, con los que podemos practicar. Podemos ver uno de ellos con el comando  <code>mpg</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>&gt; mpg
# A tibble: 234 x 11
   manufacturer model      displ  year   cyl trans      drv     cty   hwy fl    class  
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
 1 audi         a4           1.8  1999     4 auto(l5)   f        18    29 p     compact
 2 audi         a4           1.8  1999     4 manual(m5) f        21    29 p     compact
 3 audi         a4           2    2008     4 manual(m6) f        20    31 p     compact
 4 audi         a4           2    2008     4 auto(av)   f        21    30 p     compact
 5 audi         a4           2.8  1999     6 auto(l5)   f        16    26 p     compact
 6 audi         a4           2.8  1999     6 manual(m5) f        18    26 p     compact
 7 audi         a4           3.1  2008     6 auto(av)   f        18    27 p     compact
 8 audi         a4 quattro   1.8  1999     4 manual(m5) 4        18    26 p     compact
 9 audi         a4 quattro   1.8  1999     4 auto(l5)   4        16    25 p     compact
10 audi         a4 quattro   2    2008     4 manual(m6) 4        20    28 p     compact
# ... with 224 more rows
</code></pre></div>
</td></tr></table>

<div class="admonition example">
<p class="admonition-title">Razona:</p>
<p>¿Cómo podrías mostrar las 20 primeras filas de este conjunto?</p>
<details class="help"><summary>1ª Pista</summary><p>Tienes que utilizar <code>print()</code>. Puedes averiguar cómo usarlo escribiendo el comando <code>?print</code>.</p>
</details>
<details class="help"><summary>2ª Pista</summary><p>Utiliza el argumento <code>n = &lt;NÚMERO&gt;</code> dentro del comando anterior.</p>
</details>
<details class="check"><summary>Respuesta</summary><p>Empleamos el siguiente comando:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="o">&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code># A tibble: 234 x 11
  manufacturer model              displ  year   cyl trans      drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;              &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 audi         a4                   1.8  1999     4 auto(l5)   f        18    29 p     compact
2 audi         a4                   1.8  1999     4 manual(m5) f        21    29 p     compact
3 audi         a4                   2    2008     4 manual(m6) f        20    31 p     compact
4 audi         a4                   2    2008     4 auto(av)   f        21    30 p     compact
5 audi         a4                   2.8  1999     6 auto(l5)   f        16    26 p     compact
6 audi         a4                   2.8  1999     6 manual(m5) f        18    26 p     compact
7 audi         a4                   3.1  2008     6 auto(av)   f        18    27 p     compact
8 audi         a4 quattro           1.8  1999     4 manual(m5) 4        18    26 p     compact
9 audi         a4 quattro           1.8  1999     4 auto(l5)   4        16    25 p     compact
10 audi         a4 quattro           2    2008     4 manual(m6) 4        20    28 p     compact
11 audi         a4 quattro           2    2008     4 auto(s6)   4        19    27 p     compact
12 audi         a4 quattro           2.8  1999     6 auto(l5)   4        15    25 p     compact
13 audi         a4 quattro           2.8  1999     6 manual(m5) 4        17    25 p     compact
14 audi         a4 quattro           3.1  2008     6 auto(s6)   4        17    25 p     compact
15 audi         a4 quattro           3.1  2008     6 manual(m6) 4        15    25 p     compact
16 audi         a6 quattro           2.8  1999     6 auto(l5)   4        15    24 p     midsize
17 audi         a6 quattro           3.1  2008     6 auto(s6)   4        17    25 p     midsize
18 audi         a6 quattro           4.2  2008     8 auto(s6)   4        16    23 p     midsize
19 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4)   r        14    20 r     suv    
20 chevrolet    c1500 suburban 2wd   5.3  2008     8 auto(l4)   r        11    15 e     suv    
# ... with 214 more rows
</code></pre></div>
</td></tr></table></p>
</details>
</div>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Puedes encontrar información sobre cualquier comando o paquete usando <code>?&lt;NOMBRE_COMANDO&gt;</code> o <code>?&lt;NOMBRE_PAQUETE&gt;</code>. Este abrirá una "<em>vignette</em>", es decir, una guía con toda la información necesaria, que aparece en la ventana "<em>Help</em>" (abajo a la derecha en <em>RStudio</em>). Puedes saber más acerca de las "<em>vignettes</em>" <a href="https://r-pkgs.org/vignettes.html">aquí</a>.</p>
</div>
<p><strong><em>mpg</em></strong> es un conjunto de datos que reúne información sobre el consumo de combustible de diferentes vehículos, cuyas variables son las siguientes:</p>
<table>
<thead>
<tr>
<th>VARIABLE</th>
<th>DESCRIPCIÓN</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>manufacturer</em></td>
<td>Nombre de la empresa fabricante</td>
</tr>
<tr>
<td><em>model</em></td>
<td>Modelo específico del vehículo</td>
</tr>
<tr>
<td><em>displ</em></td>
<td>Cilindrada (en litros)</td>
</tr>
<tr>
<td><em>year</em></td>
<td>Año de fabricación</td>
</tr>
<tr>
<td><em>cyl</em></td>
<td>Número de cilindros</td>
</tr>
<tr>
<td><em>trans</em></td>
<td>Tipo de transmisión (manual o automática)</td>
</tr>
<tr>
<td><em>drv</em></td>
<td>Tipo de tren de transmisión (frontal, trasera o 4x4)</td>
</tr>
<tr>
<td><em>cty</em></td>
<td>Gasto en ciudad (millas por galón)</td>
</tr>
<tr>
<td><em>hwy</em></td>
<td>Gasto en carretera (millas por galón)</td>
</tr>
<tr>
<td><em>fl</em></td>
<td>Tipo de combustible</td>
</tr>
<tr>
<td><em>class</em></td>
<td>Tipo de coche</td>
</tr>
</tbody>
</table>
<p>Conociendo qué representa cada variable, podemos empezar a representarla gráficamente de forma lógica. El esquema que vamos a seguir para ello es el siguiente:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DATOS</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">+</span> 
  <span class="o">&lt;</span><span class="n">FUNCIÓN_GEOM</span><span class="o">&gt;</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">VARIABLES</span><span class="o">&gt;</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>Empezamos con la función <code>ggplot()</code>, que crea el sistema de coordenadas en el que se representan los datos. Dentro de esta función debemos incluir el conjunto de datos al que pertenecen las variables que queremos representar (en este caso, <code>data = mpg</code>).</p>
<div class="admonition warning">
<p class="admonition-title">Importante:</p>
<p>En <em>ggplot2</em>, para continuar con el comando en la siguiente línea, es necesario colocar un símbolo "+" al final de la anterior.</p>
</div>
<p>Como todavía no hemos elegido las variables, la gráfica sigue en blanco. Para seleccionarlas, primero debemos elegir el tipo de gráfico que queremos crear, dependiendo este del tipo de variable que queramos representar (si son continuas o discontinuas). Los diferentes tipos de gráficos los iremos viendo conforme avanzamos en el tutorial. Algunos de estos son:</p>
<table>
<thead>
<tr>
<th>TIPO DE GRÁFICA</th>
<th>DESCRIPCIÓN</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geom_point</code></td>
<td>Diagrama de dispersión</td>
</tr>
<tr>
<td><code>geom_smooth</code></td>
<td>Gráfico de línea suavizada</td>
</tr>
<tr>
<td><code>geom_bar</code></td>
<td>Diagrama de barras (proporcional)</td>
</tr>
<tr>
<td><code>geom_col</code></td>
<td>Diagrama de barras (valores totales)</td>
</tr>
<tr>
<td><code>geom_boxplot</code></td>
<td>Diagrama de cajas</td>
</tr>
</tbody>
</table>
<p>Por ahora, vamos a utilizar <code>geom_point</code>, que genera un diagrama de dispersión.</p>
<p>Finalmente, tenemos que elegir qué vamos a mostrar. Para ello, debemos emplear la función <code>mapping</code>, que define las variables a representar. Esta debe ir acompañada del argumento <code>aes()</code>, junto con <code>x</code> e <code>y</code> (en nuestro caso, <code>x = displ</code> e <code>y = hwy</code>).</p>
<p>Veamos cómo quedaría este ejemplo. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>Obtenemos una gráfica como esta:</p>
<p><img alt="" src="../images/visualizacion_datos/1.png" title="" /></p>
<div class="admonition example">
<p class="admonition-title">Razona:</p>
<p>Prueba a hacer lo mismo, pero representando el gasto en carretera vs. el gasto en ciudad. ¿Qué observas?</p>
<details class="check"><summary>Respuesta</summary><p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<img alt="" src="../images/visualizacion_datos/ej0.png" title="" /></p>
<p>El gasto de combustible, tanto en carretera como en ciudad, sigue una clara tendencia lineal.</p>
</details>
</div>
<h3 id="aesthetics"><em>Aesthetics</em></h3>
<p>El comando <code>aes()</code>, además de para introducir las variables principales (x e y), sirve para introducir otras variables y modificar de qué forma se van a ver en la gráfica. Ilustrándonos con el ejemplo anterior, podemos ver cómo la gráfica nos muestra la relación que existe entre el consumo de un determinado vehículo y su cilindrada. Si quisiéramos observar la relación que tienen estos resultados con la variable <em>class</em> (el tipo de coche), podemos introducirla dentro del comando <code>aes()</code> como propiedad visual.</p>
<p>Representamos la clase de coche dentro de la gráfica anterior cambiando el color de los puntos de la siguiente forma:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">class</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/2.png" title="" /></p>
<p>Como vemos, además de representar el gasto en carretera con respecto a la cilindrada, vemos con cada color cada tipo de coche que hay, revelando información extra. </p>
<div class="admonition example">
<p class="admonition-title">Razona:</p>
<p>Observando el ejemplo anterior, ¿a qué conclusión puedes llegar en relación al  tipo de vehículo, su gasto en carretera y su cilindrada?</p>
<details class="check"><summary>Respuesta:</summary><p>Los coches, por norma general, gastan más en carretera conforme aumenta su cilindrada. Sin embargo, en este ejemplo existe un grupo de coches que no sigue esta suposición. Al observar la variable que determina el tipo de coche en la gráfica, vemos como estos vehículos son de dos asientos, que, al pesar menos, gastan menos combustible que los demás, independientemente del tamaño del motor.</p>
</details>
</div>
<p>Podemos mapear cualquier variable dentro del gráfico incluyéndola en <code>aes()</code>. Además, podemos elegir que propiedad visual asignar a esta (color, tamaño de los puntos...). Podemos representar el tipo de vehículos cambiando el tamaño de los puntos (con <code>size</code>):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">class</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/3.png" title="" /></p>
<p>También podemos cambiar su transparencia (con <code>alpha</code>):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">class</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/4.png" title="" /></p>
<p>E incluso la forma de los puntos (con <code>shape</code>):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">class</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/5.png" title="" /></p>
<p>Estos ejemplos, sin embargo, muestran una serie de problemas. En los dos primeros se dificulta la visión de algunos puntos, mientras que en el tercero <em>ggplot2</em> únicamente representa seis formas de puntos, que son fácilmente diferenciables entre sí. Cuando el número de valores es mayor a seis, se dejan de representar algunas de estos.</p>
<p>Estos <em>aesthetics</em>, por tanto, solo se emplean en casos muy específicos.</p>
<div class="admonition example">
<p class="admonition-title">Razona:</p>
<p>Sobre los ejemplos anteriores, ¿cómo podrías diseñar otras gráficas empleando diferentes <em>aesthetics</em>?</p>
<details class="help"><summary>Pista:</summary><p>Puedes mirar todos los <em>aesthetics</em> posibles para el diagrama de dispersión usando <code>?geom_point</code>.</p>
</details>
</div>
<p>Una cosa muy importante para tener en cuenta es que <code>aes()</code> solo sirve para modificar las gráficas con respecto a una variable. También podemos modificarla sin tener en cuenta los valores. Por ejemplo, podemos cambiar el color de todos los puntos sacando 
<code>color</code> del comando <code>aes()</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">),</span> <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/6.png" title="" /></p>
<p>Si introdujésemos <code>color = "blue"</code> dentro de <code>aes()</code> se muestra una gráfica sin sentido, pues <em>ggplot2</em> interpreta que no existe ninguna variable llamada <em>blue</em>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/7.png" title="" /></p>
<div class="admonition example">
<p class="admonition-title">Diseña un diagrama de dispersión que represente la cilindrada vs. el gasto en ciudad</p>
<details class="check"><summary>Respuesta</summary><p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
    <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<img alt="" src="../images/visualizacion_datos/ej1.png" title="" /></p>
</details>
</div>
<div class="admonition example">
<p class="admonition-title">Sobre la gráfica del ejercicio anterior, cambia la forma de los puntos por cuadrados (<code>shape = 15</code>) y representa el tipo de combustible según el color.</p>
<details class="check"><summary>Respuesta</summary><p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
    <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">fl</span><span class="p">),</span> <span class="n">shape</span> <span class="o">=</span> <span class="m">15</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<img alt="" src="../images/visualizacion_datos/ej2.png" title="" /></p>
</details>
</div>
<div class="admonition example">
<p class="admonition-title">En el ejemplo anterior, ¿cómo modificarías la gráfica de forma que represente aquellos vehículos con una cilindrada menor que 5 de un color y aquellos con cilindrada mayor de otro?</p>
<details class="hint"><summary>Pista:</summary><p>Trata de usar <code>color = displ &lt; 5</code>.</p>
</details>
<details class="check"><summary>Respuesta</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
    <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cty</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">displ</span> <span class="o">&lt;</span> <span class="m">5</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/ej3.png" title="" /></p>
</details>
</div>
<h3 id="graficos-estadisticos">Gráficos estadísticos</h3>
<p>Son <strong>gráficos estadísticos</strong> aquellos que representan datos cuantitativos. Entre ellos encontramos los gráficos de dispersión (ya estudiados), diagramas de barras, diagramas de cajas, histogramas, etc. Para estudiar estos gráficos vamos a usar un nuevo conjunto de datos denominado "<em>diamonds</em>", incluido en <em>ggplot2</em>, que contiene características estudiadas sobre un gran número de diamantes.</p>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Puedes encontrar toda la información sobre este <em>dataset</em> (variables, descripciones, etc.) empleando el comando <code>?diamonds</code>.</p>
</div>
<p>Empecemos estudiando los <strong>gráficos de barras</strong>. Para ello, usamos el comando <code>geom_bar()</code>, de la misma forma que con los gráficos de dispersión.</p>
<p>Imaginemos que queremos clasificar los diamantes según la calidad del corte (variable <code>cut</code>). Para ello, usamos:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">diamonds</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">cut</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/8.png" title="" /></p>
<p><em>ggplot2</em> interpreta automáticamente que, al no concretar la variable <code>y</code>, debe representar el <strong>número total</strong> de diamantes por calidad de corte. Para ello, <em>ggplot2</em> emplea unas <strong>transformaciones estadísticas</strong> capaces de crear nuevas variables modificando las ya existentes. En este caso, lo que hace es contar el número de diamantes dentro de cada tipo de corte.</p>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Si quieres saber más sobre estas transformaciones estadísticas, puedes encontrar más información <a href="https://r4ds.had.co.nz/data-visualisation.html#statistical-transformations">aquí</a>.</p>
</div>
<p>Al igual que el resto de gráficas, empleando <code>aes()</code> puedes modificar a apariencia del gráfico de barras:</p>
<ul>
<li><code>color</code> cambia el color del borde de las barras</li>
<li><code>fill</code> cambia el color del relleno</li>
</ul>
<p>Por ejemplo, podemos representar la claridad de los diamantes (variable ```clarity````) de la siguiente forma:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">diamonds</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">cut</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">clarity</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/9.png" title="" /></p>
<p>También podemos representar <strong>diagramas de cajas</strong>, empleando la función <code>geom_box</code>. Como ejemplo, podemos representar el gasto en carretera según el tipo de coche de la siguiente manera:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">class</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span> <span class="o">+</span> 
  <span class="nf">geom_boxplot</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/12.png" title="" /></p>
<p>Si necesitamos girar la gráfica, simplemente añadimos <code>coord_flip()</code> justo a continuación de nuestra gráfica:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">class</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span> <span class="o">+</span> 
  <span class="nf">geom_boxplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">coord_flip</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/13.png" title="" /></p>
<div class="admonition example">
<p class="admonition-title">Razona:</p>
<p>¿A qué conclusión puedes llegar observando el ejemplo anterior?</p>
</div>
<h2 id="graficas-multiples">Gráficas múltiples</h2>
<p>A veces, para facilitar la visualización de los datos, se intentan representar varias gráficas a la vez. Para ello, existen dos formas: </p>
<ul>
<li>Representar muchas variables dentro de una misma gráfica (<em>por capas</em>).</li>
<li>Dividir los datos en varias ventanas (<em><em>facets</em></em>).</li>
</ul>
<h3 id="graficas-por-capas">Gráficas por capas</h3>
<p><em>ggplot2</em> permite representar muchas variables en una misma gráfica de forma sencilla. </p>
<p>Supongamos que necesitamos representar una línea de tendencia del gasto en carretera con respecto a la cilindrada. Usando <code>geom_smooth()</code> dibujamos una línea de tendencia suavizada del conjunto de datos propuesto:</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_smooth</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<img alt="" src="../images/visualizacion_datos/10.png" title="" /></p>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Al igual que con el resto de funciones <em>geom</em>, <code>geom_smooth()</code> también posee sus <em>aesthetics</em> específicos (tipo, grosor, color de línea...). Puedes usar <code>?geom_smooth</code> para ver los que hay disponibles.</p>
</div>
<p>Si quisiéramos representar esta línea como una capa sobre un diagrama de dispersión, simplemente escribimos sus respectivas funciones <em>geom</em> una después de la otra:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">class</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">geom_smooth</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/11.png" title="Gráfica por capas" /></p>
<p>Podemos combinar tantas capas como queramos, siempre y cuando no existan incoherencias entre las variables representadas.</p>
<h3 id="graficas-por-ventanas-facets">Gráficas por ventanas (<em>facets</em>)</h3>
<p>Imaginemos que queremos representar el gasto en carretera con respecto a la cilindrada. Imaginemos también que queremos representar los tipos de vehículos. Podemos hacer como hicimos antes, es decir, representar por colores. Esto, sin embargo, a veces puede resultar en gráficas difíciles de observar, pues es complicado distinguir los diferentes valores.</p>
<p>Para solucionar esto, podemos representar muchas gráficas a la vez, dividiendo las variables en numerosas ventanas. Para ello, usamos <code>facet_wrap()</code>. Se usa de la siguiente forma:</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">DATOS</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">+</span> 
  <span class="o">&lt;</span><span class="n">FUNCIÓN_GEOM</span><span class="o">&gt;</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="o">&lt;</span><span class="n">VARIABLES</span><span class="o">&gt;</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="o">&lt;</span><span class="n">VARIABLE</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">NÚMERO</span> <span class="n">DE</span> <span class="n">FILAS</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
Representamos el ejemplo anterior:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">class</span><span class="p">,</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/facets.png" title="Gráfica por ventanas" /></p>
<p>Con <em>facets</em> podemos representar dos variables, empleando la función <code>facet_grid()</code>. Por ejemplo, usemos como variables el tipo de tren de transmisión y el número de cilindros:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nf">ggplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">mpg</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">displ</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">hwy</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">facet_grid</span><span class="p">(</span><span class="n">drv</span> <span class="o">~</span> <span class="n">cyl</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../images/visualizacion_datos/grid.png" title="Gráfica por ventanas" /></p>
<p>Los <em>facets</em> son muy útiles cuando queremos ver una visión global de todas las posibles representaciones que podemos hacer. Con ella, vemos multitud de gráficas a la vez y podemos seleccionar la que más nos interese.</p>
<h2 id="ejercicios">Ejercicios</h2>
<div class="admonition danger">
<p class="admonition-title">Ejercicios de repaso</p>
<p>Para ver si has entendido todo, intenta realizar estos <a href="../datos/tutoradvr_1.0.0.0000.tar.gz" title="">ejercicios propuestos</a>. Para saber cómo hacerlos, visita el <a href="http://127.0.0.1:8000/ejercicios/#como-hacer-los-ejercicios-de-repaso">apartado de "Realización de ejercicios"</a>.
Tras esto, ejecuta el siguiente comando:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">learnr</span><span class="o">::</span><span class="nf">run_tutorial</span><span class="p">(</span><span class="s">&quot;visualizar&quot;</span><span class="p">,</span> <span class="s">&quot;tutoradvr&quot;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
Se abrirá una ventana en tu navegador con los ejercicios a resolver</p>
</div>
<div class="admonition cite">
<p class="admonition-title">Referencias</p>
<ul>
<li><a href="https://ucodemy.github.io/rbioq/"><strong><em>Tutorial de programación en R orientado al estudiante de Bioquímica</em></strong>; Ismael Sánchez Pareja</a></li>
<li><a href="https://r4ds.had.co.nz/"><strong><em>R for Data Science</em></strong>; Hadley Wickham, Garrett Grolemund et al.</a></li>
<li><a href="https://r-pkgs.org/vignettes.html"><strong><em>R packages - Vignettes: long-form documentation</em></strong>; Hadley Wickham, Jenny Bryan</a></li>
</ul>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        <a href="../tidyverse/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Tidyverse
            </div>
          </div>
        </a>
      
      
        <a href="../importar/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Importar datos
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta"}, "search": "../assets/javascripts/workers/search.217ffd95.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.926459b3.min.js"></script>
      
    
  </body>
</html>